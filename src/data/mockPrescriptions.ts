import type { Prescription, DashboardStats } from '../types';

/**
 * Mock prescriptions for demo/testing purposes.
 * These simulate realistic NDP FHIR MedicationRequest records
 * created by Dr. Ahmed Hassan at HealthFlow Medical Center.
 */
export const MOCK_PRESCRIPTIONS: Prescription[] = [
  {
    id: 'rx-001',
    prescriptionNumber: 'NDP-2026-000147',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-001',
      name: 'Mohamed Samir Abdallah',
      age: 54,
      gender: 'male',
      nationalId: '27005121400193',
    },
    diagnosis: 'Essential Hypertension',
    icdCode: 'I10',
    clinicalNotes: 'Patient presents with BP 160/95. Started on ACE inhibitor therapy. Follow-up in 2 weeks.',
    medications: [
      {
        medicineId: 'eda-001',
        medicineName: 'Enalapril 10mg Tablets',
        drugId: 'EDA-10234',
        medicineGenericName: 'Enalapril Maleate',
        medicineStrength: '10mg',
        medicineForm: 'Tablet',
        dosage: '10mg',
        frequency: 'Once daily',
        duration: '30 days',
        quantity: 30,
        refills: 2,
        instructions: 'Take in the morning with water',
        substitutionAllowed: true,
      },
      {
        medicineId: 'eda-002',
        medicineName: 'Amlodipine 5mg Tablets',
        drugId: 'EDA-10567',
        medicineGenericName: 'Amlodipine Besylate',
        medicineStrength: '5mg',
        medicineForm: 'Tablet',
        dosage: '5mg',
        frequency: 'Once daily',
        duration: '30 days',
        quantity: 30,
        refills: 2,
        instructions: 'Take in the evening',
        substitutionAllowed: true,
      },
    ],
    status: 'active',
    prescriptionDate: '2026-02-18T09:30:00Z',
    createdAt: '2026-02-18T09:30:00Z',
    updatedAt: '2026-02-18T09:35:00Z',
    digitalSignature: 'sha256:a1b2c3d4e5f6...',
    aiValidation: {
      valid: true,
      warnings: [],
      checkedAt: '2026-02-18T09:32:00Z',
    },
  },
  {
    id: 'rx-002',
    prescriptionNumber: 'NDP-2026-000148',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-002',
      name: 'Fatma Ibrahim El-Sayed',
      age: 62,
      gender: 'female',
      nationalId: '26404231500287',
    },
    diagnosis: 'Type 2 Diabetes Mellitus',
    icdCode: 'E11',
    clinicalNotes: 'HbA1c 8.2%. Adjusting oral hypoglycemic regimen. Diet counseling provided.',
    medications: [
      {
        medicineId: 'eda-003',
        medicineName: 'Metformin 850mg Tablets',
        drugId: 'EDA-20456',
        medicineGenericName: 'Metformin Hydrochloride',
        medicineStrength: '850mg',
        medicineForm: 'Tablet',
        dosage: '850mg',
        frequency: 'Twice daily',
        duration: '30 days',
        quantity: 60,
        refills: 3,
        instructions: 'Take with meals to reduce GI side effects',
        substitutionAllowed: true,
      },
      {
        medicineId: 'eda-004',
        medicineName: 'Glimepiride 2mg Tablets',
        drugId: 'EDA-20789',
        medicineGenericName: 'Glimepiride',
        medicineStrength: '2mg',
        medicineForm: 'Tablet',
        dosage: '2mg',
        frequency: 'Once daily',
        duration: '30 days',
        quantity: 30,
        refills: 3,
        instructions: 'Take before breakfast',
        substitutionAllowed: true,
      },
    ],
    status: 'dispensed',
    prescriptionDate: '2026-02-17T14:15:00Z',
    createdAt: '2026-02-17T14:15:00Z',
    updatedAt: '2026-02-17T16:30:00Z',
    digitalSignature: 'sha256:b2c3d4e5f6a7...',
    aiValidation: {
      valid: true,
      warnings: [],
      checkedAt: '2026-02-17T14:17:00Z',
    },
  },
  {
    id: 'rx-003',
    prescriptionNumber: 'NDP-2026-000149',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-003',
      name: 'Ali Mahmoud Kamel',
      age: 45,
      gender: 'male',
      nationalId: '28103051200456',
    },
    diagnosis: 'Acute Upper Respiratory Infection',
    icdCode: 'J06.9',
    clinicalNotes: 'Sore throat, mild fever 38.1Â°C, nasal congestion for 3 days. No signs of bacterial infection.',
    medications: [
      {
        medicineId: 'eda-005',
        medicineName: 'Paracetamol 500mg Tablets',
        drugId: 'EDA-30123',
        medicineGenericName: 'Paracetamol (Acetaminophen)',
        medicineStrength: '500mg',
        medicineForm: 'Tablet',
        dosage: '500mg',
        frequency: 'Every 6 hours as needed',
        duration: '5 days',
        quantity: 20,
        refills: 0,
        instructions: 'Do not exceed 4g per day',
        substitutionAllowed: true,
      },
      {
        medicineId: 'eda-006',
        medicineName: 'Cetirizine 10mg Tablets',
        drugId: 'EDA-30456',
        medicineGenericName: 'Cetirizine Hydrochloride',
        medicineStrength: '10mg',
        medicineForm: 'Tablet',
        dosage: '10mg',
        frequency: 'Once daily',
        duration: '5 days',
        quantity: 5,
        refills: 0,
        instructions: 'May cause drowsiness',
        substitutionAllowed: true,
      },
    ],
    status: 'dispensed',
    prescriptionDate: '2026-02-16T11:00:00Z',
    createdAt: '2026-02-16T11:00:00Z',
    updatedAt: '2026-02-16T14:20:00Z',
    digitalSignature: 'sha256:c3d4e5f6a7b8...',
    aiValidation: {
      valid: true,
      warnings: [],
      checkedAt: '2026-02-16T11:02:00Z',
    },
  },
  {
    id: 'rx-004',
    prescriptionNumber: 'NDP-2026-000150',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-004',
      name: 'Nadia Hassan Mostafa',
      age: 38,
      gender: 'female',
      nationalId: '28807152300178',
    },
    diagnosis: 'Iron Deficiency Anemia',
    icdCode: 'D50.9',
    clinicalNotes: 'Hb 9.2 g/dL, ferritin 8 ng/mL. Prescribed iron supplementation. Recheck CBC in 6 weeks.',
    medications: [
      {
        medicineId: 'eda-007',
        medicineName: 'Ferrous Sulfate 200mg Tablets',
        drugId: 'EDA-40234',
        medicineGenericName: 'Ferrous Sulfate',
        medicineStrength: '200mg',
        medicineForm: 'Tablet',
        dosage: '200mg',
        frequency: 'Twice daily',
        duration: '60 days',
        quantity: 120,
        refills: 1,
        instructions: 'Take on empty stomach with vitamin C. Avoid tea and coffee for 2 hours.',
        substitutionAllowed: true,
      },
      {
        medicineId: 'eda-008',
        medicineName: 'Vitamin C 500mg Tablets',
        drugId: 'EDA-40567',
        medicineGenericName: 'Ascorbic Acid',
        medicineStrength: '500mg',
        medicineForm: 'Tablet',
        dosage: '500mg',
        frequency: 'Twice daily',
        duration: '60 days',
        quantity: 120,
        refills: 1,
        instructions: 'Take with iron supplement to enhance absorption',
        substitutionAllowed: true,
      },
    ],
    status: 'active',
    prescriptionDate: '2026-02-15T10:45:00Z',
    createdAt: '2026-02-15T10:45:00Z',
    updatedAt: '2026-02-15T10:50:00Z',
    digitalSignature: 'sha256:d4e5f6a7b8c9...',
    aiValidation: {
      valid: true,
      warnings: [],
      checkedAt: '2026-02-15T10:47:00Z',
    },
  },
  {
    id: 'rx-005',
    prescriptionNumber: 'NDP-2026-000151',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-005',
      name: 'Youssef Tarek Mansour',
      age: 67,
      gender: 'male',
      nationalId: '25901081100345',
    },
    diagnosis: 'Chronic Obstructive Pulmonary Disease',
    icdCode: 'J44.1',
    clinicalNotes: 'COPD exacerbation with increased dyspnea. SpO2 93% on room air. Adding inhaler therapy.',
    medications: [
      {
        medicineId: 'eda-009',
        medicineName: 'Salbutamol 100mcg Inhaler',
        drugId: 'EDA-50123',
        medicineGenericName: 'Salbutamol Sulfate',
        medicineStrength: '100mcg/puff',
        medicineForm: 'Inhaler',
        dosage: '2 puffs',
        frequency: 'Every 4-6 hours as needed',
        duration: '30 days',
        quantity: 1,
        refills: 2,
        instructions: 'Shake well before use. Rinse mouth after use.',
        substitutionAllowed: false,
      },
      {
        medicineId: 'eda-010',
        medicineName: 'Prednisolone 5mg Tablets',
        drugId: 'EDA-50456',
        medicineGenericName: 'Prednisolone',
        medicineStrength: '5mg',
        medicineForm: 'Tablet',
        dosage: '30mg',
        frequency: 'Once daily',
        duration: '7 days',
        quantity: 42,
        refills: 0,
        instructions: 'Take with food. Taper as directed.',
        substitutionAllowed: true,
      },
    ],
    status: 'approved',
    prescriptionDate: '2026-02-14T08:30:00Z',
    createdAt: '2026-02-14T08:30:00Z',
    updatedAt: '2026-02-14T08:40:00Z',
    digitalSignature: 'sha256:e5f6a7b8c9d0...',
    aiValidation: {
      valid: true,
      warnings: ['Short course corticosteroid â€” monitor blood glucose'],
      checkedAt: '2026-02-14T08:33:00Z',
    },
  },
  {
    id: 'rx-006',
    prescriptionNumber: 'NDP-2026-000152',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-006',
      name: 'Mariam Adel Farouk',
      age: 29,
      gender: 'female',
      nationalId: '29706231400512',
    },
    diagnosis: 'Urinary Tract Infection',
    icdCode: 'N39.0',
    clinicalNotes: 'Dysuria and frequency for 2 days. Urine dipstick positive for nitrites and leukocytes.',
    medications: [
      {
        medicineId: 'eda-011',
        medicineName: 'Ciprofloxacin 500mg Tablets',
        drugId: 'EDA-60234',
        medicineGenericName: 'Ciprofloxacin Hydrochloride',
        medicineStrength: '500mg',
        medicineForm: 'Tablet',
        dosage: '500mg',
        frequency: 'Twice daily',
        duration: '7 days',
        quantity: 14,
        refills: 0,
        instructions: 'Complete the full course. Avoid dairy products 2 hours before/after.',
        substitutionAllowed: true,
      },
    ],
    status: 'dispensed',
    prescriptionDate: '2026-02-13T16:20:00Z',
    createdAt: '2026-02-13T16:20:00Z',
    updatedAt: '2026-02-13T17:45:00Z',
    digitalSignature: 'sha256:f6a7b8c9d0e1...',
    aiValidation: {
      valid: true,
      warnings: [],
      checkedAt: '2026-02-13T16:22:00Z',
    },
  },
  {
    id: 'rx-007',
    prescriptionNumber: 'NDP-2026-000153',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-007',
      name: 'Hassan Khaled Osman',
      age: 71,
      gender: 'male',
      nationalId: '25505101300678',
    },
    diagnosis: 'Atrial Fibrillation',
    icdCode: 'I48.91',
    clinicalNotes: 'New-onset AF detected on ECG. CHA2DS2-VASc score 4. Initiating anticoagulation.',
    medications: [
      {
        medicineId: 'eda-012',
        medicineName: 'Rivaroxaban 20mg Tablets',
        drugId: 'EDA-70345',
        medicineGenericName: 'Rivaroxaban',
        medicineStrength: '20mg',
        medicineForm: 'Tablet',
        dosage: '20mg',
        frequency: 'Once daily with food',
        duration: '30 days',
        quantity: 30,
        refills: 5,
        instructions: 'Take with evening meal. Report any unusual bleeding immediately.',
        substitutionAllowed: false,
      },
      {
        medicineId: 'eda-013',
        medicineName: 'Bisoprolol 5mg Tablets',
        drugId: 'EDA-70678',
        medicineGenericName: 'Bisoprolol Fumarate',
        medicineStrength: '5mg',
        medicineForm: 'Tablet',
        dosage: '5mg',
        frequency: 'Once daily',
        duration: '30 days',
        quantity: 30,
        refills: 5,
        instructions: 'Monitor heart rate. Do not stop abruptly.',
        substitutionAllowed: true,
      },
    ],
    status: 'active',
    prescriptionDate: '2026-02-12T09:00:00Z',
    createdAt: '2026-02-12T09:00:00Z',
    updatedAt: '2026-02-12T09:10:00Z',
    digitalSignature: 'sha256:a7b8c9d0e1f2...',
    aiValidation: {
      valid: true,
      warnings: ['High-risk anticoagulant â€” ensure renal function is adequate'],
      checkedAt: '2026-02-12T09:03:00Z',
    },
  },
  {
    id: 'rx-008',
    prescriptionNumber: 'NDP-2026-000154',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-008',
      name: 'Sara Mohamed Rizk',
      age: 33,
      gender: 'female',
      nationalId: '29301121500234',
    },
    diagnosis: 'Hypothyroidism',
    icdCode: 'E03.9',
    clinicalNotes: 'TSH 12.5 mIU/L, Free T4 0.6 ng/dL. Starting levothyroxine replacement.',
    medications: [
      {
        medicineId: 'eda-014',
        medicineName: 'Levothyroxine 50mcg Tablets',
        drugId: 'EDA-80123',
        medicineGenericName: 'Levothyroxine Sodium',
        medicineStrength: '50mcg',
        medicineForm: 'Tablet',
        dosage: '50mcg',
        frequency: 'Once daily',
        duration: '30 days',
        quantity: 30,
        refills: 5,
        instructions: 'Take on empty stomach, 30 min before breakfast. Avoid calcium/iron for 4 hours.',
        substitutionAllowed: false,
      },
    ],
    status: 'draft',
    prescriptionDate: '2026-02-18T08:15:00Z',
    createdAt: '2026-02-18T08:15:00Z',
    updatedAt: '2026-02-18T08:15:00Z',
    aiValidation: {
      valid: true,
      warnings: ['Recheck TSH in 6-8 weeks after initiation'],
      checkedAt: '2026-02-18T08:17:00Z',
    },
  },
  {
    id: 'rx-009',
    prescriptionNumber: 'NDP-2026-000155',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-009',
      name: 'Khaled Abdel-Rahman Sayed',
      age: 48,
      gender: 'male',
      nationalId: '27802091200890',
    },
    diagnosis: 'Gastroesophageal Reflux Disease',
    icdCode: 'K21.0',
    clinicalNotes: 'Heartburn and regurgitation for 4 weeks. No alarm symptoms. Trial of PPI therapy.',
    medications: [
      {
        medicineId: 'eda-015',
        medicineName: 'Omeprazole 20mg Capsules',
        drugId: 'EDA-90234',
        medicineGenericName: 'Omeprazole',
        medicineStrength: '20mg',
        medicineForm: 'Capsule',
        dosage: '20mg',
        frequency: 'Once daily before breakfast',
        duration: '14 days',
        quantity: 14,
        refills: 1,
        instructions: 'Take 30 minutes before first meal of the day',
        substitutionAllowed: true,
      },
      {
        medicineId: 'eda-016',
        medicineName: 'Gaviscon Advance Suspension',
        drugId: 'EDA-90567',
        medicineGenericName: 'Sodium Alginate / Potassium Bicarbonate',
        medicineStrength: '500mg/100mg per 5ml',
        medicineForm: 'Suspension',
        dosage: '10ml',
        frequency: 'After meals and at bedtime',
        duration: '14 days',
        quantity: 1,
        refills: 0,
        instructions: 'Shake well before use',
        substitutionAllowed: true,
      },
    ],
    status: 'pending_validation',
    prescriptionDate: '2026-02-18T10:00:00Z',
    createdAt: '2026-02-18T10:00:00Z',
    updatedAt: '2026-02-18T10:00:00Z',
  },
  {
    id: 'rx-010',
    prescriptionNumber: 'NDP-2026-000156',
    doctor: {
      id: 'doc-ahmed',
      name: 'Dr. Ahmed Hassan',
      license: 'EG-DOC-2024-78432',
      specialty: 'Internal Medicine',
    },
    patient: {
      id: 'pat-010',
      name: 'Amira Sami El-Naggar',
      age: 55,
      gender: 'female',
      nationalId: '27106151400567',
    },
    diagnosis: 'Hyperlipidemia',
    icdCode: 'E78.5',
    clinicalNotes: 'Total cholesterol 280 mg/dL, LDL 185 mg/dL. High cardiovascular risk. Starting statin therapy.',
    medications: [
      {
        medicineId: 'eda-017',
        medicineName: 'Atorvastatin 20mg Tablets',
        drugId: 'EDA-11234',
        medicineGenericName: 'Atorvastatin Calcium',
        medicineStrength: '20mg',
        medicineForm: 'Tablet',
        dosage: '20mg',
        frequency: 'Once daily at bedtime',
        duration: '30 days',
        quantity: 30,
        refills: 5,
        instructions: 'Take at bedtime. Report any muscle pain or weakness.',
        substitutionAllowed: true,
      },
    ],
    status: 'cancelled',
    prescriptionDate: '2026-02-10T13:30:00Z',
    createdAt: '2026-02-10T13:30:00Z',
    updatedAt: '2026-02-11T09:00:00Z',
  },
];

/**
 * Calculate dashboard statistics from mock prescriptions.
 */
export function getMockDashboardStats(): DashboardStats {
  return {
    total: MOCK_PRESCRIPTIONS.length,
    approved: MOCK_PRESCRIPTIONS.filter(p => p.status === 'approved' || p.status === 'active').length,
    pending: MOCK_PRESCRIPTIONS.filter(p => p.status === 'draft' || p.status === 'pending_validation').length,
    dispensed: MOCK_PRESCRIPTIONS.filter(p => p.status === 'dispensed').length,
    cancelled: MOCK_PRESCRIPTIONS.filter(p => p.status === 'cancelled' || p.status === 'rejected').length,
  };
}

/**
 * Get a single mock prescription by ID.
 */
export function getMockPrescription(id: string): Prescription | undefined {
  return MOCK_PRESCRIPTIONS.find(p => p.id === id);
}
